<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pixel Forge Studio | Creative Design & Development</title>

  <!-- ===== SEO & Social Share Meta Tags ===== -->
  <meta name="description" content="Pixel Forge Studio — Creative design and development studio crafting exceptional digital experiences. Web design, branding, UI/UX and more.">
  <meta name="author" content="Pixel Forge Studio">
  <link rel="canonical" href="https://pixelforgestudioprabhath.netlify.app/">

  <!-- Open Graph (Facebook, WhatsApp, LinkedIn, Telegram, etc.) -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://pixelforgestudioprabhath.netlify.app/">
  <meta property="og:title" content="Pixel Forge Studio | Creative Design & Development">
  <meta property="og:description" content="Crafting exceptional digital experiences — web design, branding, UI/UX and development by Pixel Forge Studio.">
  <meta property="og:image" content="https://pixelforgestudioprabhath.netlify.app/og-preview.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Pixel Forge Studio">
  <meta property="og:locale" content="en_US">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://pixelforgestudioprabhath.netlify.app/">
  <meta name="twitter:title" content="Pixel Forge Studio | Creative Design & Development">
  <meta name="twitter:description" content="Crafting exceptional digital experiences — web design, branding, UI/UX and development by Pixel Forge Studio.">
  <meta name="twitter:image" content="https://pixelforgestudioprabhath.netlify.app/og-preview.png">

  <!-- Favicon / Logo -->
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="apple-touch-icon" href="logo.png">
  <!-- ===== End Meta Tags ===== -->

  <link
    href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #080a0f;
      --surface: #0e1118;
      --surface2: #141821;
      --border: #1e2535;
      --accent: #00d4ff;
      --accent2: #ff6b35;
      --accent3: #a855f7;
      --text: #e8eaf0;
      --muted: #6b7280;
      --white: #ffffff;
      --success: #22c55e;
      --danger: #ef4444;
      --gold: #f59e0b;
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 16px;
      line-height: 1.6;
      overflow-x: hidden;
    }

    ::-webkit-scrollbar {
      width: 4px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 2px;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 9999;
      opacity: 0.4;
    }

    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 5%;
      height: 70px;
      background: rgba(8, 10, 15, 0.9);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
    }

    .nav-logo {
      font-family: 'Bebas Neue', cursive;
      font-size: 1.6rem;
      letter-spacing: 3px;
      color: var(--white);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }

    .nav-logo img {
      height: 38px;
      width: auto;
      object-fit: contain;
      display: block;
    }

    .nav-logo span {
      color: var(--accent);
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      list-style: none;
      align-items: center;
    }

    .nav-links a {
      color: var(--muted);
      text-decoration: none;
      font-size: 0.82rem;
      font-weight: 500;
      letter-spacing: 1px;
      text-transform: uppercase;
      transition: color 0.3s;
    }

    .nav-links a:hover {
      color: var(--accent);
    }

    .nav-btn {
      background: var(--accent);
      color: var(--bg);
      border: none;
      padding: 0.5rem 1.2rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
      font-size: 0.8rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
    }

    .nav-btn:hover {
      background: var(--white);
    }

    .hamburger {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
      padding: 4px;
    }

    .hamburger span {
      display: block;
      width: 24px;
      height: 2px;
      background: var(--text);
      transition: all 0.3s;
    }

    .mobile-nav {
      display: none;
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 1.5rem 5%;
      z-index: 999;
      flex-direction: column;
      gap: 0.5rem;
    }

    .mobile-nav.open {
      display: flex;
    }

    .mobile-nav a {
      color: var(--muted);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      letter-spacing: 1px;
      text-transform: uppercase;
      padding: 0.6rem 0;
      border-bottom: 1px solid var(--border);
    }

    #hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 100px 5% 60px;
      position: relative;
      overflow: hidden;
    }

    .hero-grid-bg {
      position: absolute;
      inset: 0;
      background-image: linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
    }

    .hero-glow {
      position: absolute;
      width: 600px;
      height: 600px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0, 212, 255, 0.08) 0%, transparent 70%);
      top: 50%;
      left: 60%;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    .hero-glow2 {
      position: absolute;
      width: 400px;
      height: 400px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(168, 85, 247, 0.06) 0%, transparent 70%);
      top: 30%;
      left: 20%;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 700px;
    }

    .hero-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid var(--border);
      padding: 0.4rem 1rem;
      font-size: 0.72rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 2rem;
      animation: fadeUp 0.8s ease both;
    }

    .hero-tag::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.3;
      }
    }

    .hero-title {
      font-family: 'Bebas Neue', cursive;
      font-size: clamp(3.5rem, 8vw, 7rem);
      line-height: 0.95;
      letter-spacing: 2px;
      color: var(--white);
      margin-bottom: 1.5rem;
      animation: fadeUp 0.8s 0.1s ease both;
    }

    .hero-title .line2 {
      color: var(--accent);
      display: block;
    }

    .hero-sub {
      font-size: 1.05rem;
      color: var(--muted);
      max-width: 500px;
      margin-bottom: 2.5rem;
      font-weight: 300;
      animation: fadeUp 0.8s 0.2s ease both;
    }

    .hero-sub strong {
      color: var(--text);
      font-weight: 500;
    }

    .hero-cta {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      animation: fadeUp 0.8s 0.3s ease both;
    }

    .btn-primary {
      background: var(--accent);
      color: var(--bg);
      border: none;
      padding: 0.9rem 2rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
      font-size: 0.85rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s;
    }

    .btn-primary:hover {
      background: var(--white);
      transform: translateY(-2px);
      box-shadow: 0 10px 40px rgba(0, 212, 255, 0.3);
    }

    .btn-secondary {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      padding: 0.9rem 2rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 500;
      font-size: 0.85rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s;
    }

    .btn-secondary:hover {
      border-color: var(--accent);
      color: var(--accent);
      transform: translateY(-2px);
    }

    .hero-stats {
      display: flex;
      gap: 3rem;
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      animation: fadeUp 0.8s 0.4s ease both;
    }

    .stat-num {
      font-family: 'Bebas Neue', cursive;
      font-size: 2.5rem;
      color: var(--accent);
      line-height: 1;
    }

    .stat-label {
      font-size: 0.72rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    section {
      padding: 100px 5%;
    }

    .section-label {
      font-size: 0.72rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .section-label::after {
      content: '';
      flex: 1;
      max-width: 60px;
      height: 1px;
      background: var(--accent);
    }

    .section-title {
      font-family: 'Bebas Neue', cursive;
      font-size: clamp(2rem, 5vw, 4rem);
      letter-spacing: 2px;
      color: var(--white);
      margin-bottom: 1rem;
    }

    .section-desc {
      color: var(--muted);
      max-width: 550px;
      font-weight: 300;
      margin-bottom: 3rem;
    }

    #services {
      background: var(--surface);
    }

    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5px;
      background: var(--border);
    }

    .service-card {
      background: var(--surface);
      padding: 2.5rem;
      position: relative;
      overflow: hidden;
      transition: all 0.4s;
    }

    .service-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--accent);
      transform: scaleX(0);
      transition: transform 0.4s;
    }

    .service-card:hover::before {
      transform: scaleX(1);
    }

    .service-card:hover {
      background: var(--surface2);
    }

    .service-icon {
      width: 48px;
      height: 48px;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
      color: var(--accent);
    }

    .service-name {
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--white);
      margin-bottom: 0.75rem;
    }

    .service-desc {
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.7;
    }

    #projects {
      background: var(--bg);
    }

    .filter-tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 3rem;
      flex-wrap: wrap;
    }

    .filter-tab {
      padding: 0.5rem 1.2rem;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.78rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
    }

    .filter-tab.active,
    .filter-tab:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(0, 212, 255, 0.05);
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
    }

    .project-card {
      background: var(--surface);
      border: 1px solid var(--border);
      overflow: hidden;
      transition: all 0.4s;
    }

    .project-card:hover {
      border-color: rgba(0, 212, 255, 0.3);
      transform: translateY(-4px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    }

    .project-thumb {
      position: relative;
      overflow: hidden;
      height: 200px;
      background: var(--surface2);
    }

    .project-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .project-card:hover .project-thumb img {
      transform: scale(1.05);
    }

    .project-thumb-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .project-card:hover .project-thumb-overlay {
      opacity: 1;
    }

    .thumb-btn {
      background: var(--accent);
      color: var(--bg);
      border: none;
      padding: 0.55rem 1.1rem;
      font-size: 0.72rem;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s;
    }

    .thumb-btn:hover {
      background: var(--white);
    }

    .thumb-btn.outline {
      background: transparent;
      border: 1px solid var(--white);
      color: var(--white);
    }

    .thumb-btn.outline:hover {
      background: var(--white);
      color: var(--bg);
    }

    .project-category-badge {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: var(--accent);
      color: var(--bg);
      font-size: 0.62rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 0.3rem 0.7rem;
    }

    .project-body {
      padding: 1.5rem;
    }

    .project-title {
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1.05rem;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .project-desc {
      color: var(--muted);
      font-size: 0.85rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .project-rating {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .stars {
      color: var(--gold);
      font-size: 0.85rem;
    }

    .rating-count {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .project-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }

    .comment-count {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .view-detail-btn {
      font-size: 0.75rem;
      color: var(--accent);
      background: none;
      border: none;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .like-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: none;
      border: 1px solid var(--border);
      color: var(--muted);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.3rem 0.75rem;
      cursor: pointer;
      transition: all 0.25s;
      letter-spacing: 0.5px;
    }

    .like-btn:hover {
      border-color: #ff6b8a;
      color: #ff6b8a;
    }

    .like-btn.liked {
      border-color: #ff6b8a;
      color: #ff6b8a;
      background: rgba(255, 107, 138, 0.08);
    }

    .like-btn svg {
      transition: transform 0.2s;
    }

    .like-btn.liked svg {
      fill: #ff6b8a;
      transform: scale(1.2);
    }

    .card-expand-details {
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.4s ease, padding 0.3s ease;
      background: var(--surface2);
      border-top: 1px solid var(--border);
    }

    .card-expand-details.open {
      max-height: 400px;
    }

    .card-expand-inner {
      padding: 1rem 1.5rem;
    }

    .expand-toggle-btn {
      font-size: 0.72rem;
      color: var(--muted);
      background: none;
      border: none;
      cursor: pointer;
      font-family: 'DM Sans', sans-serif;
      font-weight: 500;
      letter-spacing: 1px;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      transition: color 0.2s;
      padding: 0.5rem 1.5rem;
      width: 100%;
      border-top: 1px solid var(--border);
    }

    .expand-toggle-btn:hover {
      color: var(--accent);
    }

    .expand-toggle-btn .toggle-arrow {
      transition: transform 0.3s;
      display: inline-block;
    }

    .expand-toggle-btn.open .toggle-arrow {
      transform: rotate(180deg);
    }

    .modal-like-row {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }

    .upload-area {
      border: 2px dashed var(--border);
      padding: 1.5rem;
      text-align: center;
      cursor: pointer;
      transition: border-color 0.3s;
      position: relative;
      margin-bottom: 0.5rem;
    }

    .upload-area:hover, .upload-area.drag-over {
      border-color: var(--accent);
    }

    .upload-area input[type=file] {
      position: absolute;
      inset: 0;
      opacity: 0;
      cursor: pointer;
      width: 100%;
      height: 100%;
    }

    .upload-area-text {
      font-size: 0.82rem;
      color: var(--muted);
      pointer-events: none;
    }

    .upload-area-text strong {
      color: var(--accent);
      display: block;
      margin-bottom: 0.25rem;
      font-size: 0.88rem;
    }

    .upload-progress {
      height: 3px;
      background: var(--border);
      margin-top: 0.5rem;
      display: none;
    }

    .upload-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent3));
      width: 0%;
      transition: width 0.3s;
    }

    .tab-row {
      display: flex;
      gap: 0;
      margin-bottom: 0.75rem;
      border: 1px solid var(--border);
    }

    .tab-btn {
      flex: 1;
      padding: 0.5rem;
      background: none;
      border: none;
      color: var(--muted);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab-btn.active {
      background: var(--accent);
      color: var(--bg);
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      backdrop-filter: blur(10px);
    }

    .modal-overlay.open {
      opacity: 1;
      pointer-events: all;
    }

    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(30px);
      transition: transform 0.3s;
    }

    .modal-overlay.open .modal {
      transform: translateY(0);
    }

    .modal-header {
      position: sticky;
      top: 0;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 1.2rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 10;
    }

    .modal-title {
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      font-size: 1.05rem;
      color: var(--white);
    }

    .modal-close {
      background: none;
      border: 1px solid var(--border);
      color: var(--text);
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .modal-close:hover {
      border-color: var(--danger);
      color: var(--danger);
    }

    .modal-body {
      padding: 1.5rem;
    }

    .modal-img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      margin-bottom: 1.5rem;
    }

    .modal-video {
      width: 100%;
      margin-bottom: 1.5rem;
      max-height: 300px;
      background: var(--surface2);
    }

    .modal-preview-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--accent);
      color: var(--bg);
      padding: 0.6rem 1.2rem;
      text-decoration: none;
      font-size: 0.78rem;
      font-weight: 700;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 1.5rem;
      transition: all 0.3s;
    }

    .modal-preview-link:hover {
      background: var(--white);
    }

    .comments-section {
      margin-top: 2rem;
    }

    .comments-title {
      font-family: 'Syne', sans-serif;
      font-weight: 700;
      color: var(--white);
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .star-rating-input {
      display: flex;
      align-items: center;
      gap: 0.2rem;
      margin-bottom: 0.75rem;
      flex-direction: row-reverse;
      justify-content: flex-end;
    }

    .star-rating-input label {
      font-size: 1.6rem;
      color: var(--border);
      cursor: pointer;
      transition: color 0.15s;
    }

    .comment-input,
    .comment-name-input {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 0.75rem 1rem;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.3s;
      margin-bottom: 0.75rem;
    }

    .comment-input {
      resize: vertical;
      min-height: 80px;
    }

    .comment-input:focus,
    .comment-name-input:focus {
      border-color: var(--accent);
    }

    .submit-comment-btn {
      background: var(--accent);
      color: var(--bg);
      border: none;
      padding: 0.6rem 1.5rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
      font-size: 0.78rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
    }

    .submit-comment-btn:hover {
      background: var(--white);
    }

    .comment-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .comment-item {
      background: var(--surface2);
      border: 1px solid var(--border);
      padding: 1rem;
    }

    .comment-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 0.4rem;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .comment-author {
      font-weight: 600;
      font-size: 0.85rem;
      color: var(--white);
    }

    .comment-date {
      font-size: 0.72rem;
      color: var(--muted);
    }

    .comment-text {
      font-size: 0.85rem;
      color: var(--muted);
      line-height: 1.6;
    }

    #about {
      background: var(--surface);
    }

    .about-grid {
      display: grid;
      grid-template-columns: 1fr 1.4fr;
      gap: 5rem;
      align-items: center;
    }

    .about-img-wrap {
      position: relative;
    }

    .about-img {
      width: 100%;
      aspect-ratio: 3/4;
      object-fit: cover;
      filter: grayscale(20%);
    }

    .about-img-border {
      position: absolute;
      top: 20px;
      left: 20px;
      right: -20px;
      bottom: -20px;
      border: 1px solid var(--accent);
      z-index: -1;
    }

    .about-info {
      margin-top: 2rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .about-info-item {
      display: flex;
      gap: 1rem;
      font-size: 0.9rem;
    }

    .info-label {
      color: var(--muted);
      min-width: 80px;
    }

    .info-value {
      color: var(--text);
    }

    .skills-wrap {
      margin-top: 2rem;
    }

    .skill-item {
      margin-bottom: 1rem;
    }

    .skill-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 0.4rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .skill-bar {
      height: 2px;
      background: var(--border);
      position: relative;
      overflow: hidden;
    }

    .skill-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent3));
      width: 0;
      transition: width 1.5s ease;
    }

    #connect {
      background: var(--bg);
    }

    .social-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
      gap: 1rem;
      margin-bottom: 4rem;
    }

    .social-card {
      border: 1px solid var(--border);
      padding: 1.5rem;
      text-decoration: none;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 1rem;
      transition: all 0.3s;
    }

    .social-card:hover {
      border-color: var(--accent);
      background: rgba(0, 212, 255, 0.04);
      transform: translateY(-3px);
    }

    .social-icon {
      width: 40px;
      height: 40px;
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .social-name {
      font-size: 0.78rem;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .social-handle {
      font-size: 0.72rem;
      color: var(--muted);
    }

    .hire-box {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.08), rgba(168, 85, 247, 0.08));
      border: 1px solid rgba(0, 212, 255, 0.2);
      padding: 3rem;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hire-box h2 {
      font-family: 'Bebas Neue', cursive;
      font-size: clamp(2rem, 4vw, 3.5rem);
      letter-spacing: 3px;
      color: var(--white);
      margin-bottom: 1rem;
    }

    .hire-box p {
      color: var(--muted);
      margin-bottom: 2rem;
    }

    .wa-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      background: #25d366;
      color: var(--white);
      padding: 1rem 2.5rem;
      text-decoration: none;
      font-weight: 700;
      font-size: 0.88rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      transition: all 0.3s;
    }

    .wa-btn:hover {
      background: #20b958;
      transform: translateY(-2px);
      box-shadow: 0 10px 40px rgba(37, 211, 102, 0.3);
    }

    footer {
      background: var(--surface);
      border-top: 1px solid var(--border);
      padding: 2rem 5%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .footer-logo {
      font-family: 'Bebas Neue', cursive;
      font-size: 1.2rem;
      letter-spacing: 3px;
      color: var(--white);
    }

    .footer-logo span {
      color: var(--accent);
    }

    .footer-copy {
      font-size: 0.78rem;
      color: var(--muted);
    }

    #dashboard {
      display: none;
      min-height: 100vh;
      background: var(--bg);
      padding-top: 70px;
    }

    .dash-layout {
      display: flex;
      min-height: calc(100vh - 70px);
    }

    .dash-sidebar {
      width: 220px;
      flex-shrink: 0;
      background: var(--surface);
      border-right: 1px solid var(--border);
      padding: 1.5rem 0;
      position: sticky;
      top: 70px;
      height: calc(100vh - 70px);
      overflow-y: auto;
    }

    .dash-sidebar-title {
      font-size: 0.65rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--muted);
      padding: 0 1.5rem;
      margin-bottom: 0.5rem;
    }

    .dash-menu {
      list-style: none;
    }

    .dash-menu li {
      margin-bottom: 0.15rem;
    }

    .dash-menu a {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.7rem 1.5rem;
      color: var(--muted);
      text-decoration: none;
      font-size: 0.83rem;
      font-weight: 500;
      transition: all 0.3s;
      border-left: 2px solid transparent;
    }

    .dash-menu a:hover,
    .dash-menu a.active {
      color: var(--accent);
      border-left-color: var(--accent);
      background: rgba(0, 212, 255, 0.04);
    }

    .dash-content {
      flex: 1;
      padding: 2rem;
      overflow-x: hidden;
    }

    .dash-panel {
      display: none;
    }

    .dash-panel.active {
      display: block;
    }

    .dash-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .dash-title {
      font-family: 'Syne', sans-serif;
      font-weight: 800;
      font-size: 1.4rem;
      color: var(--white);
    }

    .stat-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    .stat-card::after {
      content: '';
      position: absolute;
      top: -20px;
      right: -20px;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(0, 212, 255, 0.08), transparent);
    }

    .stat-card-label {
      font-size: 0.72rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 0.75rem;
    }

    .stat-card-num {
      font-family: 'Bebas Neue', cursive;
      font-size: 2.5rem;
      color: var(--white);
      line-height: 1;
    }

    .stat-card-change {
      font-size: 0.72rem;
      color: var(--success);
      margin-top: 0.4rem;
    }

    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-label {
      display: block;
      font-size: 0.75rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 0.5rem;
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 0.75rem 1rem;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.3s;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      border-color: var(--accent);
    }

    .form-textarea {
      resize: vertical;
      min-height: 100px;
    }

    .form-select option {
      background: var(--surface2);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .form-hint {
      font-size: 0.72rem;
      color: var(--muted);
      margin-top: 0.25rem;
    }

    .submit-btn {
      background: var(--accent);
      color: var(--bg);
      border: none;
      padding: 0.9rem 2rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
      font-size: 0.83rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
    }

    .submit-btn:hover {
      background: var(--white);
    }

    .danger-btn {
      background: var(--danger);
      color: var(--white);
      border: none;
      padding: 0.4rem 0.8rem;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.72rem;
      cursor: pointer;
      transition: background 0.3s;
      letter-spacing: 0.5px;
    }

    .danger-btn:hover {
      background: #c0392b;
    }

    .admin-projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .admin-project-card {
      background: var(--surface);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .admin-project-thumb {
      height: 140px;
      background: var(--surface2);
    }

    .admin-project-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .admin-project-body {
      padding: 1rem;
    }

    .admin-project-name {
      font-weight: 700;
      font-size: 0.88rem;
      color: var(--white);
      margin-bottom: 0.25rem;
    }

    .admin-project-cat {
      font-size: 0.68rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 0.75rem;
    }

    .admin-project-actions {
      display: flex;
      gap: 0.5rem;
    }

    .feedback-table {
      width: 100%;
      border-collapse: collapse;
    }

    .feedback-table th {
      text-align: left;
      padding: 0.75rem 1rem;
      font-size: 0.72rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 1px;
      border-bottom: 1px solid var(--border);
      white-space: nowrap;
    }

    .feedback-table td {
      padding: 0.75rem 1rem;
      font-size: 0.83rem;
      border-bottom: 1px solid var(--border);
      color: var(--text);
    }

    .feedback-table tr:hover td {
      background: rgba(255, 255, 255, 0.02);
    }

    .table-wrap {
      overflow-x: auto;
    }

    .visitors-chart-wrap {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .chart-bars {
      display: flex;
      align-items: flex-end;
      gap: 8px;
      height: 140px;
      margin-top: 1.5rem;
    }

    .chart-bar-wrap {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      height: 100%;
      justify-content: flex-end;
    }

    .chart-bar {
      width: 100%;
      background: linear-gradient(180deg, var(--accent), rgba(0, 212, 255, 0.2));
      border-radius: 1px 1px 0 0;
      min-height: 4px;
      transition: height 1s ease;
    }

    .chart-label {
      font-size: 0.6rem;
      color: var(--muted);
    }

    /* LOADING SCREEN */
    #loading-screen {
      position: fixed;
      inset: 0;
      background: var(--bg);
      z-index: 9998;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      transition: opacity 0.5s ease;
    }

    #loading-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-logo {
      font-family: 'Bebas Neue', cursive;
      font-size: 2.4rem;
      letter-spacing: 5px;
      color: var(--white);
    }

    .loading-logo span {
      color: var(--accent);
    }

    .loading-bar-wrap {
      width: 200px;
      height: 2px;
      background: var(--border);
      overflow: hidden;
    }

    .loading-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent3));
      animation: loadbar 1.6s ease forwards;
    }

    @keyframes loadbar {
      from {
        width: 0;
      }

      to {
        width: 100%;
      }
    }

    .loading-text {
      font-size: 0.72rem;
      color: var(--muted);
      letter-spacing: 3px;
      text-transform: uppercase;
    }

    /* ADMIN LOGIN MODAL */
    #admin-login-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 6000;
      display: none;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
    }

    #admin-login-overlay.open {
      display: flex;
    }

    .auth-box {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 3rem;
      max-width: 420px;
      width: 100%;
      text-align: center;
      animation: fadeUp 0.5s ease both;
    }

    .auth-logo {
      font-family: 'Bebas Neue', cursive;
      font-size: 2.2rem;
      letter-spacing: 4px;
      color: var(--white);
      margin-bottom: 0.5rem;
    }

    .auth-logo span {
      color: var(--accent);
    }

    .auth-sub {
      color: var(--muted);
      font-size: 0.85rem;
      margin-bottom: 2rem;
    }

    .auth-input {
      width: 100%;
      background: var(--surface2);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 0.85rem 1rem;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.3s;
      margin-bottom: 0.85rem;
      text-align: left;
    }

    .auth-input:focus {
      border-color: var(--accent);
    }

    .auth-submit-btn {
      display: block;
      width: 100%;
      background: var(--accent);
      color: var(--bg);
      border: none;
      padding: 0.9rem 1.5rem;
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
      font-size: 0.88rem;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.3s;
      margin-bottom: 0.85rem;
    }

    .auth-submit-btn:hover {
      background: var(--white);
    }

    .auth-cancel-btn {
      display: block;
      width: 100%;
      background: transparent;
      color: var(--muted);
      border: 1px solid var(--border);
      padding: 0.9rem;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .auth-cancel-btn:hover {
      border-color: var(--muted);
      color: var(--text);
    }

    .auth-error {
      color: var(--danger);
      font-size: 0.8rem;
      margin-bottom: 0.75rem;
      display: none;
      text-align: left;
    }

    .auth-error.show {
      display: block;
    }

    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: var(--surface);
      border: 1px solid var(--accent);
      color: var(--text);
      padding: 1rem 1.5rem;
      font-size: 0.85rem;
      z-index: 9000;
      transform: translateX(200%);
      transition: transform 0.4s;
      max-width: 300px;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.error {
      border-color: var(--danger);
    }

    .toast.success {
      border-color: var(--success);
    }

    .no-projects-msg {
      text-align: center;
      padding: 4rem 2rem;
      color: var(--muted);
      grid-column: 1/-1;
      font-size: 0.9rem;
    }

    /* Edit Button */
    .edit-btn {
      background: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
      padding: 0.4rem 0.8rem;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.72rem;
      cursor: pointer;
      transition: all 0.3s;
      letter-spacing: 0.5px;
    }

    .edit-btn:hover {
      background: var(--accent);
      color: var(--bg);
    }

    @media(max-width:900px) {
      .nav-links {
        display: none;
      }

      .hamburger {
        display: flex;
      }

      .about-grid {
        grid-template-columns: 1fr;
      }

      .about-img-wrap {
        display: block;
        max-width: 280px;
        margin: 0 auto 2rem;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .dash-sidebar {
        width: 200px;
      }
    }

    @media(max-width:700px) {
      .hero-stats {
        gap: 1.5rem;
        flex-wrap: wrap;
      }

      .dash-layout {
        flex-direction: column;
      }

      .dash-sidebar {
        width: 100%;
        height: auto;
        position: static;
        display: flex;
        overflow-x: auto;
        padding: 0;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }

      .dash-menu {
        display: flex;
      }

      .dash-menu li {
        margin-bottom: 0;
      }

      .dash-menu a {
        padding: 1rem;
        white-space: nowrap;
        border-left: none;
        border-bottom: 2px solid transparent;
      }

      .dash-menu a:hover,
      .dash-menu a.active {
        border-left-color: transparent;
        border-bottom-color: var(--accent);
      }

      .dash-content {
        padding: 1rem;
      }

      .projects-grid {
        grid-template-columns: 1fr;
      }

      .admin-projects-grid {
        grid-template-columns: 1fr;
      }
    }

    @media(max-width:480px) {
      .hero-cta {
        flex-direction: column;
      }

      .btn-primary,
      .btn-secondary {
        width: 100%;
        justify-content: center;
      }

      .hire-box {
        padding: 2rem 1.5rem;
      }

      .auth-box {
        padding: 2rem 1.2rem;
      }

      .modal-body {
        padding: 1rem;
      }
    }
  </style>
</head>

<body>

  <!-- LOADING SCREEN -->
  <div id="loading-screen">
    <div class="loading-logo">PIXEL <span>FORGE</span> STUDIO</div>
    <div class="loading-bar-wrap">
      <div class="loading-bar"></div>
    </div>
    <div class="loading-text">Loading</div>
  </div>

  <!-- ADMIN LOGIN MODAL (only shown when admin nav button clicked) -->
  <div id="admin-login-overlay">
    <div class="auth-box">
      <div class="auth-logo">PIXEL <span>FORGE</span> STUDIO</div>
      <p class="auth-sub">Admin Access Only</p>
      <div class="auth-error" id="auth-error-msg">Invalid credentials. Please try again.</div>
      <input type="text" class="auth-input" id="admin-email-input" placeholder="Username" autocomplete="off">
      <input type="password" class="auth-input" id="admin-pass-input" placeholder="Password" autocomplete="off">
      <button class="auth-submit-btn" onclick="attemptAdminLogin()">Sign In</button>
      <button class="auth-cancel-btn" onclick="closeAdminLogin()">Cancel</button>
    </div>
  </div>

  <!-- NAV -->
  <nav>
    <a href="#hero" class="nav-logo">
      <img src="logo.png" alt="Pixel Forge Studio Logo" onerror="this.style.display='none'">
      PIXEL <span>FORGE</span> STUDIO
    </a>
    <ul class="nav-links" id="nav-links">
      <li><a href="#services">Services</a></li>
      <li><a href="#projects">Projects</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#connect">Contact</a></li>
      <li><button class="nav-btn" id="auth-nav-btn" onclick="handleAuthNavBtn()">Admin</button></li>
    </ul>
    <div class="hamburger" id="hamburger" onclick="toggleMobileNav()">
      <span></span><span></span><span></span>
    </div>
  </nav>
  <div class="mobile-nav" id="mobile-nav">
    <a href="#services" onclick="closeMobileNav()">Services</a>
    <a href="#projects" onclick="closeMobileNav()">Projects</a>
    <a href="#about" onclick="closeMobileNav()">About</a>
    <a href="#connect" onclick="closeMobileNav()">Contact</a>
    <button class="nav-btn mobile-admin-btn" id="mobile-admin-btn" onclick="closeMobileNav();handleAuthNavBtn();"
      style="margin-top:0.5rem;width:100%;padding:0.75rem;">Admin Login</button>
  </div>

  <!-- MAIN SITE -->
  <div id="main-site">
    <!-- HERO -->
    <section id="hero">
      <div class="hero-grid-bg"></div>
      <div class="hero-glow"></div>
      <div class="hero-glow2"></div>
      <div class="hero-content">
        <div class="hero-tag">Available for Projects</div>
        <h1 class="hero-title">Pixel Forge<span class="line2">Studio</span></h1>
        <p class="hero-sub"><strong>Prabhath Kelum</strong> — CEO and Lead Developer crafting high-quality web and
          software solutions for modern businesses.</p>
        <div class="hero-cta">
          <a href="#projects" class="btn-primary">View Projects</a>
          <a href="https://wa.me/94714056318?text=Hello%2C%20I'm%20interested%20in%20starting%20a%20project%20with%20you!"
            target="_blank" class="btn-secondary">Hire Me</a>
        </div>
        <div class="hero-stats">
          <div>
            <div class="stat-num" id="hero-project-count">0</div>
            <div class="stat-label">Projects Done</div>
          </div>
          <div>
            <div class="stat-num" id="hero-visitor-count">0</div>
            <div class="stat-label">Visitors</div>
          </div>
          <div>
            <div class="stat-num">3</div>
            <div class="stat-label">Services</div>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="services">
      <div class="section-label">What I Do</div>
      <h2 class="section-title">Core Services</h2>
      <p class="section-desc">From desktop applications to full-stack web solutions — fast, scalable, and beautifully
        designed products.</p>
      <div class="services-grid">
        <div class="service-card">
          <div class="service-icon">
            <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <rect x="2" y="3" width="20" height="14" rx="2" />
              <path d="M8 21h8M12 17v4" />
            </svg>
          </div>
          <div class="service-name">Software Development</div>
          <p class="service-desc">Desktop and system applications built with performance and reliability in mind. From
            utility tools to full enterprise-grade desktop software solutions.</p>
        </div>
        <div class="service-card">
          <div class="service-icon">
            <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" />
              <path
                d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
            </svg>
          </div>
          <div class="service-name">Web Development</div>
          <p class="service-desc">Responsive, fast-loading, SEO-optimized websites. Clean code, modern design, and
            cross-browser compatibility guaranteed on every project.</p>
        </div>
        <div class="service-card">
          <div class="service-icon">
            <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
            </svg>
          </div>
          <div class="service-name">Web Applications</div>
          <p class="service-desc">Cloud-based and logic-heavy web apps tailored to specific business requirements.
            Scalable architecture using Firebase backend integration.</p>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects">
      <div class="section-label">Portfolio</div>
      <h2 class="section-title">Featured Projects</h2>
      <p class="section-desc">A curated selection of recent work across software, web, and application development.</p>
      <div class="filter-tabs">
        <button class="filter-tab active" onclick="filterProjects('all',this)">All</button>
        <button class="filter-tab" onclick="filterProjects('software',this)">Software</button>
        <button class="filter-tab" onclick="filterProjects('web',this)">Web Development</button>
        <button class="filter-tab" onclick="filterProjects('webapp',this)">Web Apps</button>
      </div>
      <div class="projects-grid" id="projects-grid">
        <div class="no-projects-msg">Loading projects...</div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about">
      <div class="section-label">About Me</div>
      <div class="about-grid">
        <div class="about-img-wrap">
          <img src="./prabhath.jpg" alt="Prabhath Kelum" class="about-img">
          <div class="about-img-border"></div>
        </div>
        <div class="about-content">
          <h2 class="section-title">Prabhath Kelum</h2>
          <p class="section-desc">CEO and Lead Developer at Pixel Forge Studio. Passionate about building digital
            products that solve real problems and deliver measurable results for clients worldwide.</p>
          <div class="about-info">
            <div class="about-info-item"><span class="info-label">Name</span><span class="info-value">Prabhath
                Kelum</span></div>
            <div class="about-info-item"><span class="info-label">Title</span><span class="info-value">CEO, Lead
                Developer</span></div>
            <div class="about-info-item"><span class="info-label">Location</span><span class="info-value">Sri
                Lanka</span></div>
            <div class="about-info-item"><span class="info-label">WhatsApp</span><span class="info-value">+94 71 405
                6318</span></div>
          </div>
          <div class="skills-wrap">
            <div class="skill-item">
              <div class="skill-label"><span>HTML / CSS / JavaScript</span><span>95%</span></div>
              <div class="skill-bar">
                <div class="skill-fill" data-width="95"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-label"><span>Firebase / Backend</span><span>85%</span></div>
              <div class="skill-bar">
                <div class="skill-fill" data-width="85"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-label"><span>UI / UX Design</span><span>80%</span></div>
              <div class="skill-bar">
                <div class="skill-fill" data-width="80"></div>
              </div>
            </div>
            <div class="skill-item">
              <div class="skill-label"><span>Software Development</span><span>75%</span></div>
              <div class="skill-bar">
                <div class="skill-fill" data-width="75"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONNECT -->
    <section id="connect">
      <div class="section-label">Connect</div>
      <h2 class="section-title">Find Me Online</h2>
      <p class="section-desc">Reach out through any platform or message directly on WhatsApp to start your project
        today.</p>
      <div class="social-grid">
        <a href="https://github.com/Prabhath528" target="_blank" class="social-card">
          <div class="social-icon"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
            </svg></div>
          <div>
            <div class="social-name">GitHub</div>
            <div class="social-handle">Prabhath528</div>
          </div>
        </a>
        <a href="https://www.linkedin.com/in/prabhath-kelum-1841132a6" target="_blank" class="social-card">
          <div class="social-icon" style="color:#0077b5"><svg width="18" height="18" fill="currentColor"
              viewBox="0 0 24 24">
              <path
                d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
            </svg></div>
          <div>
            <div class="social-name">LinkedIn</div>
            <div class="social-handle">Prabhath Kelum</div>
          </div>
        </a>
        <a href="https://www.facebook.com/share/1CWbu2LnW5/" target="_blank" class="social-card">
          <div class="social-icon" style="color:#1877f2"><svg width="18" height="18" fill="currentColor"
              viewBox="0 0 24 24">
              <path
                d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
            </svg></div>
          <div>
            <div class="social-name">Facebook</div>
            <div class="social-handle">Connect</div>
          </div>
        </a>
        <a href="https://www.instagram.com/prabh_athkelum?igsh=ZHA4bndtZXYzMDdp" target="_blank" class="social-card">
          <div class="social-icon" style="color:#e4405f"><svg width="18" height="18" fill="currentColor"
              viewBox="0 0 24 24">
              <path
                d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z" />
            </svg></div>
          <div>
            <div class="social-name">Instagram</div>
            <div class="social-handle">@prabh_athkelum</div>
          </div>
        </a>
        <a href="https://www.tiktok.com/@pixelforgestudo" target="_blank" class="social-card">
          <div class="social-icon"><svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.32 6.32 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.93a8.22 8.22 0 0 0 4.83 1.55V7.04a4.85 4.85 0 0 1-1.06-.35z" />
            </svg></div>
          <div>
            <div class="social-name">TikTok</div>
            <div class="social-handle">Pixel Forge Studio</div>
          </div>
        </a>
      </div>
      <div class="hire-box">
        <h2>Ready to Start a Project?</h2>
        <p>Have an idea? Let's bring it to life. Message me directly on WhatsApp and let's discuss your requirements.
        </p>
        <a href="https://wa.me/94714056318?text=Hello%2C%20I'm%20interested%20in%20starting%20a%20project%20with%20you!"
          target="_blank" class="wa-btn">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z" />
          </svg>
          Message on WhatsApp
        </a>
      </div>
    </section>
  </div>

  <!-- ADMIN DASHBOARD -->
  <div id="dashboard">
    <div class="dash-layout">
      <aside class="dash-sidebar">
        <div class="dash-sidebar-title" style="margin-bottom:1rem;">Admin Panel</div>
        <ul class="dash-menu">
          <li><a href="#" class="active" onclick="return showPanel('overview',this)">Overview</a></li>
          <li><a href="#" onclick="return showPanel('add-project',this)">Add Project</a></li>
          <li><a href="#" onclick="return showPanel('manage-projects',this)">Manage Projects</a></li>
          <li><a href="#" onclick="return showPanel('visitors',this)">Visitors</a></li>
          <li><a href="#" onclick="return showPanel('feedback',this)">Feedback</a></li>
          <li style="margin-top:2rem;"><a href="#" onclick="exitDashboard();return false;"
              style="color:var(--muted)">View Site</a></li>
          <li><a href="#" onclick="doSignOut();return false;" style="color:var(--danger)">Sign Out</a></li>
        </ul>
      </aside>
      <main class="dash-content">
        <!-- OVERVIEW -->
        <div class="dash-panel active" id="panel-overview">
          <div class="dash-header">
            <div class="dash-title">Dashboard Overview</div>
            <div style="font-size:0.78rem;color:var(--muted)">Pixel Forge Studio</div>
          </div>
          <!-- Google Drive Setup Notice -->
          <div id="gdrive-setup-notice" style="background:rgba(66,133,244,0.07);border:1px solid rgba(66,133,244,0.3);padding:1.2rem 1.5rem;margin-bottom:1.5rem;">
            <div style="font-family:'Syne',sans-serif;font-weight:700;color:#4285f4;margin-bottom:0.5rem;font-size:0.9rem;">&#128197; Google Drive Upload — One-Time Setup</div>
            <p style="color:var(--muted);font-size:0.82rem;line-height:1.8;margin:0;">
              <strong style="color:var(--text)">Steps to enable Google Drive upload for images &amp; videos:</strong><br>
              1) Go to <a href="https://console.cloud.google.com" target="_blank" style="color:#4285f4">console.cloud.google.com</a> → Create a project → Enable <strong style="color:var(--text)">Google Drive API</strong><br>
              2) Go to <strong style="color:var(--text)">APIs &amp; Services → Credentials → Create OAuth 2.0 Client ID</strong><br>
              &nbsp;&nbsp;&nbsp;• Application type: <strong style="color:var(--text)">Web application</strong><br>
              &nbsp;&nbsp;&nbsp;• Authorized JavaScript origins: add your website URL (e.g. <code style="color:#4285f4">https://yoursite.com</code>)<br>
              3) Copy the <strong style="color:var(--text)">Client ID</strong> and paste it in the code where it says <code style="color:#4285f4">YOUR_GOOGLE_CLIENT_ID</code><br>
              4) Save the file → Go to <strong style="color:var(--text)">Add Project</strong> → click <strong style="color:var(--text)">Connect Google Drive</strong><br>
              5) Authorize with your Google account — uploads go to a <strong style="color:var(--text)">PixelForgeStudio</strong> folder in your Drive, automatically public so visitors can view them.
            </p>
          </div>
          <div id="firebase-setup-notice"
            style="background:rgba(245,158,11,0.08);border:1px solid var(--gold);padding:1.2rem 1.5rem;margin-bottom:1.5rem;border-radius:0;">
            <div
              style="font-family:'Syne',sans-serif;font-weight:700;color:var(--gold);margin-bottom:0.5rem;font-size:0.9rem;">
              ⚡ Firebase Setup Required</div>
            <p style="color:var(--muted);font-size:0.82rem;line-height:1.7;margin:0;">
              To make your projects visible on all devices (laptop, phone, tablet), you need to add your Firebase
              credentials.<br>
              <strong style="color:var(--text)">Steps:</strong> 1) Go to <a href="https://console.firebase.google.com"
                target="_blank" style="color:var(--accent)">console.firebase.google.com</a> → Create project → Add Web
              App → Copy the config object. 2) Open this HTML file and replace the <code
                style="color:var(--accent)">firebaseConfig</code> values at the top of the second script block. 3) In
              Firebase Console, enable <strong style="color:var(--text)">Realtime Database</strong> and <strong
                style="color:var(--text)">Storage</strong>, and set rules to allow read/write. Done!
            </p>
          </div>
          <div class="stat-cards">
            <div class="stat-card">
              <div class="stat-card-label">Total Projects</div>
              <div class="stat-card-num" id="dash-total-projects">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-label">Total Visitors</div>
              <div class="stat-card-num" id="dash-total-visitors">0</div>
              <div class="stat-card-change">All time</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-label">Total Reviews</div>
              <div class="stat-card-num" id="dash-total-comments">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-label">Avg Rating</div>
              <div class="stat-card-num" id="dash-avg-rating">0.0</div>
            </div>
          </div>
          <div class="visitors-chart-wrap">
            <div style="font-size:0.75rem;color:var(--muted);letter-spacing:1px;text-transform:uppercase;">Visitor
              Activity — Last 7 Days</div>
            <div class="chart-bars" id="visitor-chart"></div>
          </div>
        </div>

        <!-- ADD PROJECT -->
        <div class="dash-panel" id="panel-add-project">
          <div class="dash-header">
            <div class="dash-title">Add New Project</div>
          </div>

          <!-- Google Drive Connect Banner -->
          <div id="gdrive-banner" style="background:rgba(66,133,244,0.08);border:1px solid rgba(66,133,244,0.35);padding:1rem 1.25rem;margin-bottom:1.5rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:0.75rem;">
            <div>
              <div style="font-size:0.75rem;color:#4285f4;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:0.3rem;">
                &#128197; Google Drive Upload
              </div>
              <div id="gdrive-status-text" style="font-size:0.8rem;color:var(--muted);">Connect Google Drive to upload screenshots &amp; videos directly from your device.</div>
            </div>
            <button id="gdrive-connect-btn" onclick="gdriveAuth()" style="background:#4285f4;color:#fff;border:none;padding:0.55rem 1.2rem;font-family:'DM Sans',sans-serif;font-weight:700;font-size:0.78rem;letter-spacing:1px;text-transform:uppercase;cursor:pointer;white-space:nowrap;transition:background 0.2s;">
              &#128279; Connect Google Drive
            </button>
          </div>

          <div class="form-row">
            <div class="form-group"><label class="form-label">Project Name</label><input type="text" class="form-input" id="proj-name" placeholder="My Awesome Project"></div>
            <div class="form-group"><label class="form-label">Category</label><select class="form-select" id="proj-cat">
                <option value="software">Software Development</option>
                <option value="web">Web Development</option>
                <option value="webapp">Web Application</option>
              </select></div>
          </div>
          <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea" id="proj-desc" placeholder="Describe this project, its purpose, tech used..."></textarea></div>

          <div class="form-row">
            <!-- SCREENSHOT FIELD -->
            <div class="form-group">
              <label class="form-label">Screenshot / Thumbnail</label>
              <div class="tab-row">
                <button class="tab-btn active" id="img-tab-url" onclick="switchImgTab('url')">&#128279; Paste URL</button>
                <button class="tab-btn" id="img-tab-upload" onclick="switchImgTab('drive')">&#128197; Google Drive</button>
              </div>
              <div id="img-url-mode">
                <input type="url" class="form-input" id="proj-img" placeholder="https://i.imgur.com/yourimage.jpg">
                <p class="form-hint">Paste any public image URL here</p>
                <div id="img-preview-add" style="display:none;margin-top:0.5rem;"><img src="" alt="preview" style="max-height:100px;object-fit:cover;max-width:100%;border:1px solid var(--border)"></div>
              </div>
              <div id="img-drive-mode" style="display:none;">
                <div class="upload-area" id="img-drive-dropzone" onclick="triggerDriveUpload('img')">
                  <input type="file" id="img-file-input" accept="image/*" style="position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;" onchange="handleDriveUpload(this,'img')">
                  <div class="upload-area-text">
                    <strong>&#128247; Click to upload image</strong>
                    Saves to Google Drive — visitors can view it
                  </div>
                </div>
                <div class="upload-progress" id="img-drive-progress" style="display:none;"><div class="upload-progress-bar" id="img-drive-bar"></div></div>
                <div id="img-drive-status" style="font-size:0.75rem;color:var(--muted);margin-top:0.4rem;"></div>
                <div id="img-drive-preview" style="display:none;margin-top:0.5rem;"><img src="" alt="preview" style="max-height:100px;object-fit:cover;max-width:100%;border:1px solid var(--border)"></div>
                <input type="hidden" id="proj-img-uploaded" value="">
              </div>
            </div>

            <!-- VIDEO FIELD -->
            <div class="form-group">
              <label class="form-label">Demo Video <span style="color:var(--muted)">(optional)</span></label>
              <div class="tab-row">
                <button class="tab-btn active" id="vid-tab-url" onclick="switchVidTab('url')">&#128279; Paste URL</button>
                <button class="tab-btn" id="vid-tab-upload" onclick="switchVidTab('drive')">&#128197; Google Drive</button>
              </div>
              <div id="vid-url-mode">
                <input type="url" class="form-input" id="proj-video" placeholder="https://youtube.com/watch?v=...">
                <p class="form-hint">YouTube, Vimeo, or any direct .mp4 URL</p>
              </div>
              <div id="vid-drive-mode" style="display:none;">
                <div class="upload-area" onclick="triggerDriveUpload('vid')">
                  <input type="file" id="vid-file-input" accept="video/*" style="position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;" onchange="handleDriveUpload(this,'vid')">
                  <div class="upload-area-text">
                    <strong>&#127909; Click to upload video</strong>
                    MP4, WebM — saves to Google Drive
                  </div>
                </div>
                <div class="upload-progress" id="vid-drive-progress" style="display:none;"><div class="upload-progress-bar" id="vid-drive-bar"></div></div>
                <div id="vid-drive-status" style="font-size:0.75rem;color:var(--muted);margin-top:0.4rem;"></div>
                <input type="hidden" id="proj-video-uploaded" value="">
              </div>
            </div>
          </div>

          <div class="form-group"><label class="form-label">Live Preview Link <span style="color:var(--muted)">(optional)</span></label><input type="url" class="form-input" id="proj-link" placeholder="https://your-project.com"></div>
          <button class="submit-btn" onclick="addProject()">Add Project</button>
        </div>

        <!-- MANAGE PROJECTS -->
        <div class="dash-panel" id="panel-manage-projects">
          <div class="dash-header">
            <div class="dash-title">Manage Projects</div>
          </div>
          <div class="admin-projects-grid" id="admin-projects-grid">
            <p style="color:var(--muted)">Loading...</p>
          </div>
        </div>

        <!-- VISITORS -->
        <div class="dash-panel" id="panel-visitors">
          <div class="dash-header">
            <div class="dash-title">Visitor Analytics</div>
          </div>
          <div class="stat-cards">
            <div class="stat-card">
              <div class="stat-card-label">Today</div>
              <div class="stat-card-num" id="v-today">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-label">This Week</div>
              <div class="stat-card-num" id="v-week">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-card-label">All Time</div>
              <div class="stat-card-num" id="v-total">0</div>
            </div>
          </div>
          <div class="visitors-chart-wrap">
            <div style="font-size:0.75rem;color:var(--muted);letter-spacing:1px;text-transform:uppercase;">Daily
              Breakdown — Last 7 Days</div>
            <div class="chart-bars" id="visitor-chart-detail"></div>
          </div>
          <p style="color:var(--muted);font-size:0.82rem;line-height:1.6;">Visitor tracking uses browser localStorage as
            a demo. For production-level analytics, connect Firebase Realtime Database or Google Analytics 4.</p>
        </div>

        <!-- FEEDBACK -->
        <div class="dash-panel" id="panel-feedback">
          <div class="dash-header">
            <div class="dash-title">Client Feedback</div>
          </div>
          <div class="table-wrap">
            <table class="feedback-table">
              <thead>
                <tr>
                  <th>Project</th>
                  <th>Author</th>
                  <th>Rating</th>
                  <th>Comment</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="feedback-tbody">
                <tr>
                  <td colspan="5" style="color:var(--muted);text-align:center;padding:2rem;">No feedback yet.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- PROJECT DETAIL MODAL -->
  <div class="modal-overlay" id="project-modal">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="modal-title">Project Details</div>
        <button class="modal-close" onclick="closeModal()">&#x2715;</button>
      </div>
      <div class="modal-body" id="modal-body"></div>
    </div>
  </div>

  <!-- EDIT PROJECT MODAL -->
  <div class="modal-overlay" id="edit-project-modal">
    <div class="modal" style="max-width:650px;">
      <div class="modal-header">
        <div class="modal-title">Edit Project</div>
        <button class="modal-close" onclick="closeEditModal()">&#x2715;</button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="edit-proj-id">
        <div class="form-row">
          <div class="form-group"><label class="form-label">Project Name</label><input type="text" class="form-input"
              id="edit-proj-name" placeholder="Project Name"></div>
          <div class="form-group"><label class="form-label">Category</label><select class="form-select"
              id="edit-proj-cat">
              <option value="software">Software Development</option>
              <option value="web">Web Development</option>
              <option value="webapp">Web Application</option>
            </select></div>
        </div>
        <div class="form-group"><label class="form-label">Description</label><textarea class="form-textarea"
            id="edit-proj-desc" style="min-height:120px;"></textarea></div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Screenshot / Thumbnail</label>
            <div class="tab-row">
              <button class="tab-btn active" id="edit-img-tab-url" onclick="switchEditImgTab('url')">&#128279; Paste URL</button>
              <button class="tab-btn" id="edit-img-tab-upload" onclick="switchEditImgTab('drive')">&#128197; Google Drive</button>
            </div>
            <div id="edit-img-url-mode">
              <input type="url" class="form-input" id="edit-proj-img" placeholder="https://i.imgur.com/yourimage.jpg">
              <p class="form-hint">Paste any public image URL here</p>
            </div>
            <div id="edit-img-upload-mode" style="display:none;">
              <div class="upload-area" style="position:relative;">
                <input type="file" id="edit-img-file-input" accept="image/*" style="position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;" onchange="handleEditImgUpload(this)">
                <div class="upload-area-text"><strong>&#128247; Click to upload image to Google Drive</strong></div>
              </div>
              <div class="upload-progress" id="edit-img-progress" style="display:none;"><div class="upload-progress-bar" id="edit-img-bar"></div></div>
              <div id="edit-img-status" style="font-size:0.75rem;color:var(--muted);margin-top:0.25rem;"></div>
              <input type="hidden" id="edit-proj-img-uploaded" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Demo Video URL <span style="color:var(--muted)">(optional)</span></label>
            <input type="url" class="form-input" id="edit-proj-video" placeholder="https://youtube.com/watch?v=...">
            <p class="form-hint">YouTube, Vimeo, or direct .mp4 link</p>
          </div>
        </div>
        <div class="form-group"><label class="form-label">Live Preview Link <span
              style="color:var(--muted)">(optional)</span></label><input type="url" class="form-input"
            id="edit-proj-link" placeholder="https://your-project.com"></div>
        <button class="submit-btn" onclick="saveEditProject()">Save Changes</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <footer>
    <div class="footer-logo">PIXEL <span>FORGE</span> STUDIO</div>
    <div class="footer-copy">© 2026 Pixel Forge Studio — CEO Prabhath Kelum. All rights reserved.</div>
  </footer>

  <!-- Admin Auth — no Firebase, pure JS -->
  <script>
    // ============================================================
    // ADMIN AUTH — username + password only, no Firebase
    // ============================================================
    const ADMIN_USER = 'prabhath582';
    const ADMIN_PASS = 'Admin123@!Pass';

    function _updateNavBtn(label, fn) {
      const btn = document.getElementById('auth-nav-btn');
      if (btn) { btn.textContent = label; btn.onclick = fn; }
      const mobileBtn = document.getElementById('mobile-admin-btn');
      if (mobileBtn) { mobileBtn.textContent = label; mobileBtn.onclick = function () { closeMobileNav(); fn(); }; }
    }

    function _closeLoginOverlay() {
      document.getElementById('admin-login-overlay').classList.remove('open');
    }

    window.attemptAdminLogin = function () {
      const username = document.getElementById('admin-email-input').value.trim();
      const password = document.getElementById('admin-pass-input').value;
      const errEl = document.getElementById('auth-error-msg');
      errEl.classList.remove('show');

      if (!username || !password) {
        errEl.textContent = 'Please enter your username and password.';
        errEl.classList.add('show');
        return;
      }

      if (username === ADMIN_USER && password === ADMIN_PASS) {
        window._isAdmin = true;
        _closeLoginOverlay();
        showDashboard();
        _updateNavBtn('Admin Panel', () => showDashboard());
      } else {
        errEl.textContent = 'Invalid credentials. Please try again.';
        errEl.classList.add('show');
      }
    };

    window.doSignOut = function () {
      window._isAdmin = false;
      document.getElementById('admin-email-input').value = '';
      document.getElementById('admin-pass-input').value = '';
      _updateNavBtn('Admin', () => handleAuthNavBtn());
      exitDashboard();
    };
  </script>

  <!-- Firebase SDK v9 compat -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

  <script>
    // ============================================================
    // FIREBASE CONFIG — Replace with YOUR project credentials
    // Go to: console.firebase.google.com → Project Settings → Your Apps
    // ============================================================
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCUmD18sZaxrDbKNJNy1c7uCsk7EpHCNGY",
      authDomain: "pixelforgestudio.firebaseapp.com",
      projectId: "pixelforgestudio",
      storageBucket: "pixelforgestudio.firebasestorage.app",
      messagingSenderId: "578344030588",
      appId: "1:578344030588:web:0f4fc94306e6e1045994f9",
      measurementId: "G-NZFZC4VCM7"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ============================================================
    // FIREBASE DATA LAYER
    // All data is stored in Firebase Realtime Database so it is
    // visible from ANY device — laptop, phone, tablet, etc.
    // Images/videos are stored as URLs (use Imgur, Cloudinary, etc.)
    // ============================================================

    // In-memory cache so UI stays fast
    window._cache = { projects: [], comments: [], visitors: { total: 0, days: {} } };

    // --- Projects ---
    function getProjects() { return window._cache.projects || []; }

    function saveProjects(arr) {
      // Convert array to keyed object for Firebase
      window._cache.projects = arr;
      const obj = {};
      arr.forEach(p => { obj[p.id] = p; });
      return db.ref('projects').set(obj);
    }

    async function addProjectToFirebase(projectData) {
      const ref = db.ref('projects').push();
      projectData.id = ref.key;
      await ref.set(projectData);
      // Do NOT manually update _cache here.
      // The Firebase on('value') listener fires automatically and rebuilds
      // _cache.projects from the database — adding it here too causes duplicates.
    }

    async function updateProjectInFirebase(id, data) {
      await db.ref('projects/' + id).update(data);
      const idx = window._cache.projects.findIndex(p => p.id == id);
      if (idx !== -1) window._cache.projects[idx] = { ...window._cache.projects[idx], ...data };
    }

    async function deleteProjectFromFirebase(id) {
      await db.ref('projects/' + id).remove();
      window._cache.projects = window._cache.projects.filter(p => p.id != id);
    }

    // --- Comments ---
    function getComments() { return window._cache.comments || []; }

    async function addCommentToFirebase(commentData) {
      const ref = db.ref('comments').push();
      commentData.id = ref.key;
      await ref.set(commentData);
      window._cache.comments.push(commentData);
    }

    // --- Visitors ---
    function getVisitors() { return window._cache.visitors || { total: 0, days: {} }; }

    async function trackVisit() {
      const today = new Date().toISOString().split('T')[0];
      try {
        await db.ref('visitors/total').transaction(v => (v || 0) + 1);
        await db.ref('visitors/days/' + today).transaction(v => (v || 0) + 1);
      } catch (e) { /* offline fallback */ }
    }

    // ============================================================
    // FIREBASE LISTENERS — sync data in real-time
    // ============================================================
    function startFirebaseListeners() {
      // Projects: listen for real-time changes
      db.ref('projects').on('value', snap => {
        const val = snap.val() || {};
        window._cache.projects = Object.values(val).sort((a, b) => {
          // Sort newest first
          if (a.date && b.date) return new Date(b.createdAt || 0) - new Date(a.createdAt || 0);
          return 0;
        });
        renderProjects();
        if (document.getElementById('dashboard').style.display !== 'none') {
          renderAdminProjects();
          loadDashboardStats();
        }
        animateNum('hero-project-count', window._cache.projects.length);
      });

      // Comments
      db.ref('comments').on('value', snap => {
        const val = snap.val() || {};
        window._cache.comments = Object.values(val);
      });

      // Visitors
      db.ref('visitors').on('value', snap => {
        window._cache.visitors = snap.val() || { total: 0, days: {} };
        animateNum('hero-visitor-count', window._cache.visitors.total || 0);
        if (document.getElementById('dashboard').style.display !== 'none') {
          loadDashboardStats();
        }
      });

      // Likes
      db.ref('likes').on('value', snap => {
        window._cache.likes = snap.val() || {};
      });
    }

    // ============================================================
    // LOADING SCREEN
    // ============================================================
    window.addEventListener('load', function () {
      // Start Firebase listeners immediately
      startFirebaseListeners();
      trackVisit();

      setTimeout(function () {
        const ls = document.getElementById('loading-screen');
        if (ls) {
          ls.classList.add('hidden');
          setTimeout(function () { ls.style.display = 'none'; }, 500);
        }
        initPublicSite();
      }, 1600);
    });

    // ============================================================
    // ADMIN LOGIN OVERLAY CONTROLS
    // ============================================================
    window.closeAdminLogin = function () {
      document.getElementById('admin-login-overlay').classList.remove('open');
      document.getElementById('auth-error-msg').classList.remove('show');
      document.getElementById('admin-email-input').value = '';
      document.getElementById('admin-pass-input').value = '';
    };

    // Allow pressing Enter in password field to submit
    document.addEventListener('DOMContentLoaded', function () {
      const passInput = document.getElementById('admin-pass-input');
      if (passInput) {
        passInput.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') { window.attemptAdminLogin && window.attemptAdminLogin(); }
        });
      }
      const emailInput = document.getElementById('admin-email-input');
      if (emailInput) {
        emailInput.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') { document.getElementById('admin-pass-input').focus(); }
        });
      }
    });

    // ============================================================
    // AUTH / OVERLAY
    // ============================================================
    window.handleAuthNavBtn = function () {
      if (window._isAdmin) showDashboard();
      else document.getElementById('admin-login-overlay').classList.add('open');
    };

    // ============================================================
    // DASHBOARD
    // ============================================================
    window.showDashboard = function () {
      document.getElementById('main-site').style.display = 'none';
      document.querySelector('footer').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      const btn = document.getElementById('auth-nav-btn');
      if (btn) { btn.textContent = 'View Site'; btn.onclick = exitDashboard; }
      loadDashboardStats();
    };

    window.exitDashboard = function () {
      document.getElementById('main-site').style.display = 'block';
      document.querySelector('footer').style.display = 'flex';
      document.getElementById('dashboard').style.display = 'none';
      const btn = document.getElementById('auth-nav-btn');
      if (btn) { btn.textContent = 'Admin Panel'; btn.onclick = showDashboard; }
      renderProjects();
      animateHeroStats();
    };

    window.showPanel = function (name, el) {
      document.querySelectorAll('.dash-panel').forEach(p => p.classList.remove('active'));
      document.querySelectorAll('.dash-menu a').forEach(a => a.classList.remove('active'));
      const panel = document.getElementById('panel-' + name);
      if (panel) panel.classList.add('active');
      if (el) el.classList.add('active');
      if (name === 'manage-projects') renderAdminProjects();
      if (name === 'feedback') renderFeedbackTable();
      if (name === 'visitors') renderVisitorStats();
      return false;
    };

    function loadDashboardStats() {
      const projects = getProjects();
      const comments = getComments();
      const visitors = getVisitors();
      document.getElementById('dash-total-projects').textContent = projects.length;
      document.getElementById('dash-total-visitors').textContent = visitors.total || 0;
      document.getElementById('dash-total-comments').textContent = comments.length;
      const avg = comments.length ? (comments.reduce((a, c) => a + (c.rating || 0), 0) / comments.length).toFixed(1) : '0.0';
      document.getElementById('dash-avg-rating').textContent = avg;
      renderVisitorChartIn('visitor-chart');
    }

    function renderVisitorChartIn(containerId) {
      const v = getVisitors();
      const days = [];
      for (let i = 6; i >= 0; i--) {
        const d = new Date(); d.setDate(d.getDate() - i);
        const key = d.toISOString().split('T')[0];
        days.push({ label: d.toLocaleDateString('en', { weekday: 'short' }), count: v.days[key] || 0 });
      }
      const max = Math.max(...days.map(d => d.count), 1);
      const el = document.getElementById(containerId);
      if (!el) return;
      el.innerHTML = days.map(d => `
    <div class="chart-bar-wrap">
      <div class="chart-bar" style="height:${Math.max((d.count / max) * 100, 4)}%;" title="${d.count} visits"></div>
      <div class="chart-label">${d.label}</div>
    </div>`).join('');
    }

    function renderAdminProjects() {
      const projects = getProjects();
      const grid = document.getElementById('admin-projects-grid');
      if (!projects.length) { grid.innerHTML = '<p style="color:var(--muted)">No projects added yet.</p>'; return; }
      const defImgs = { software: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&q=60', web: 'https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=400&q=60', webapp: 'https://images.unsplash.com/photo-1551650975-87deedd944c3?w=400&q=60' };
      grid.innerHTML = projects.map((p) => {
        const adminThumb = fixDriveImgUrl(p.img) || defImgs[p.category] || defImgs.web;
        return `
    <div class="admin-project-card">
      <div class="admin-project-thumb"><img src="${adminThumb}" alt="${p.name}" onerror="this.src='${defImgs[p.category] || defImgs.web}'"></div>
      <div class="admin-project-body">
        <div class="admin-project-name">${p.name}</div>
        <div class="admin-project-cat">${p.category}</div>
        <div class="admin-project-actions">
          <button class="edit-btn" onclick="openEditModal('${p.id}')">Edit</button>
          <button class="danger-btn" onclick="deleteProject('${p.id}')">Delete</button>
        </div>
      </div>
    </div>`;
      }).join('');
    }

    window.deleteProject = async function (id) {
      if (!confirm('Delete this project? This cannot be undone.')) return;
      try {
        await deleteProjectFromFirebase(id);
        renderAdminProjects();
        loadDashboardStats();
        showToast('Project deleted.', 'success');
      } catch (e) {
        showToast('Error deleting project: ' + e.message, 'error');
      }
    };

    // ============================================================
    // EDIT PROJECT MODAL
    // ============================================================
    window.openEditModal = function (id) {
      const p = getProjects().find(x => x.id == id);
      if (!p) return;
      document.getElementById('edit-proj-id').value = id;
      document.getElementById('edit-proj-name').value = p.name || '';
      document.getElementById('edit-proj-cat').value = p.category || 'web';
      document.getElementById('edit-proj-desc').value = p.desc || '';
      document.getElementById('edit-proj-img').value = p.img || '';
      document.getElementById('edit-proj-video').value = p.video || '';
      document.getElementById('edit-proj-link').value = p.link || '';
      const eu = document.getElementById('edit-proj-img-uploaded'); if (eu) eu.value = '';
      const es = document.getElementById('edit-img-status'); if (es) { es.textContent = ''; es.style.color = 'var(--muted)'; }
      document.getElementById('edit-project-modal').classList.add('open');
    };

    window.closeEditModal = function () {
      document.getElementById('edit-project-modal').classList.remove('open');
    };

    document.getElementById('edit-project-modal').addEventListener('click', e => {
      if (e.target === document.getElementById('edit-project-modal')) closeEditModal();
    });

    window.saveEditProject = async function () {
      const id = document.getElementById('edit-proj-id').value;
      const name = document.getElementById('edit-proj-name').value.trim();
      const cat = document.getElementById('edit-proj-cat').value;
      const desc = document.getElementById('edit-proj-desc').value.trim();
      const uploadedImg = (document.getElementById('edit-proj-img-uploaded') && document.getElementById('edit-proj-img-uploaded').value) || '';
      const img = uploadedImg || (document.getElementById('edit-proj-img').value || '').trim();
      const video = (document.getElementById('edit-proj-video').value || '').trim();
      const link = (document.getElementById('edit-proj-link').value || '').trim();
      if (!name) { showToast('Project name is required.', 'error'); return; }
      if (!desc) { showToast('Description is required.', 'error'); return; }

      const saveBtn = document.querySelector('#edit-project-modal .submit-btn');
      if (saveBtn) { saveBtn.textContent = 'Saving...'; saveBtn.disabled = true; }

      try {
        await updateProjectInFirebase(id, { name, category: cat, desc, img, video, link });
        closeEditModal();
        showToast('Project updated!', 'success');
      } catch (e) {
        showToast('Error saving: ' + e.message, 'error');
      } finally {
        if (saveBtn) { saveBtn.textContent = 'Save Changes'; saveBtn.disabled = false; }
      }
    };

    // ============================================================
    // IMAGE URL LIVE PREVIEW (add project form)
    // ============================================================
    document.addEventListener('DOMContentLoaded', function () {
      const imgInput = document.getElementById('proj-img');
      const preview = document.getElementById('img-preview-add');
      if (imgInput && preview) {
        imgInput.addEventListener('input', function () {
          const url = this.value.trim();
          if (url) {
            const img = preview.querySelector('img');
            if (img) { img.src = url; preview.style.display = 'block'; }
          } else { preview.style.display = 'none'; }
        });
      }
    });

    function renderFeedbackTable() {
      const comments = getComments();
      const tbody = document.getElementById('feedback-tbody');
      if (!comments.length) { tbody.innerHTML = '<tr><td colspan="5" style="color:var(--muted);text-align:center;padding:2rem;">No reviews yet.</td></tr>'; return; }
      tbody.innerHTML = comments.map(c => `
    <tr>
      <td>${c.projectName || '-'}</td>
      <td>${c.author || 'Anonymous'}</td>
      <td><span style="color:var(--gold)">${'★'.repeat(c.rating || 0)}</span> ${c.rating || 0}/5</td>
      <td>${c.text || '-'}</td>
      <td>${c.date || '-'}</td>
    </tr>`).join('');
    }

    function renderVisitorStats() {
      const v = getVisitors();
      document.getElementById('v-total').textContent = v.total || 0;
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('v-today').textContent = v.days[today] || 0;
      let wk = 0;
      for (let i = 0; i < 7; i++) { const d = new Date(); d.setDate(d.getDate() - i); wk += (v.days[d.toISOString().split('T')[0]] || 0); }
      document.getElementById('v-week').textContent = wk;
      renderVisitorChartIn('visitor-chart-detail');
    }

    // ============================================================
    // GOOGLE DRIVE UPLOAD ENGINE
    // ============================================================
    // HOW TO SET UP:
    //  1. Go to https://console.cloud.google.com
    //  2. Create a project → Enable "Google Drive API"
    //  3. Go to APIs & Services → Credentials → Create OAuth 2.0 Client ID
    //     - Application type: Web application
    //     - Authorized JavaScript origins: add your site URL (e.g. https://yoursite.com)
    //       For local testing add: http://localhost  or  http://127.0.0.1
    //  4. Copy the Client ID and paste it below replacing YOUR_GOOGLE_CLIENT_ID
    //  5. In your Drive: share a folder publicly, or files will be shared per-upload
    // ============================================================
    // ============================================================
    // GOOGLE DRIVE IMAGE URL FIXER
    // Converts any Drive URL to a working thumbnail URL for <img> tags
    // ============================================================
    function fixDriveImgUrl(url) {
      if (!url) return url;
      // Match drive.google.com/uc?...id=FILE_ID or /file/d/FILE_ID/...
      let fileId = null;
      const ucMatch = url.match(/[?&]id=([a-zA-Z0-9_-]+)/);
      const fileMatch = url.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);
      if (ucMatch) fileId = ucMatch[1];
      else if (fileMatch) fileId = fileMatch[1];
      if (fileId) {
        // Use Google Drive thumbnail API — works without cookies/login for public files
        return `https://drive.google.com/thumbnail?id=${fileId}&sz=w800`;
      }
      return url;
    }

    const GDRIVE_CLIENT_ID = '840556911782-3284eothg5gfre1t34m2usernspch8ec.apps.googleusercontent.com'; // ← Replace this!
    const GDRIVE_SCOPES = 'https://www.googleapis.com/auth/drive.file';
    const GDRIVE_FOLDER_NAME = 'PixelForgeStudio'; // Folder created in your Drive

    let gdriveToken = null;
    let gdriveTokenExpiry = 0;
    let gdriveFolderId = null;

    // Load Google Identity Services
    (function loadGSI() {
      const s = document.createElement('script');
      s.src = 'https://accounts.google.com/gsi/client';
      s.async = true; s.defer = true;
      s.onload = () => { checkGDriveTokenStorage(); };
      document.head.appendChild(s);
    })();

    function checkGDriveTokenStorage() {
      try {
        const stored = JSON.parse(sessionStorage.getItem('gdrive_token') || 'null');
        if (stored && stored.expiry > Date.now()) {
          gdriveToken = stored.token;
          gdriveTokenExpiry = stored.expiry;
          updateDriveBannerConnected();
        }
      } catch(e) {}
    }

    function updateDriveBannerConnected() {
      const btn = document.getElementById('gdrive-connect-btn');
      const txt = document.getElementById('gdrive-status-text');
      if (btn) { btn.textContent = '✓ Google Drive Connected'; btn.style.background = 'var(--success)'; btn.onclick = gdriveSignOut; }
      if (txt) txt.textContent = 'You can now upload images & videos directly to your Google Drive.';
    }

    function updateDriveBannerDisconnected() {
      const btn = document.getElementById('gdrive-connect-btn');
      const txt = document.getElementById('gdrive-status-text');
      if (btn) { btn.textContent = '⟳ Reconnect Google Drive'; btn.style.background = '#4285f4'; btn.onclick = gdriveAuth; }
      if (txt) txt.textContent = 'Connect Google Drive to upload screenshots & videos directly from your device.';
    }

    window.gdriveAuth = function() {
      if (!window.google || !window.google.accounts) {
        showToast('Google Identity Services not loaded yet. Try again in a moment.', 'error'); return;
      }
      if (GDRIVE_CLIENT_ID === 'YOUR_GOOGLE_CLIENT_ID') {
        showToast('⚠ Please set your Google Client ID in the code first. See setup instructions.', 'error');
        alert('SETUP REQUIRED:\n\n1. Go to https://console.cloud.google.com\n2. Create project → Enable Drive API\n3. Create OAuth 2.0 Client ID (Web application)\n4. Add your site URL to Authorized JavaScript Origins\n5. Copy the Client ID and paste it in the code where it says YOUR_GOOGLE_CLIENT_ID\n\nThen refresh the page and click Connect again.');
        return;
      }
      const client = google.accounts.oauth2.initTokenClient({
        client_id: GDRIVE_CLIENT_ID,
        scope: GDRIVE_SCOPES,
        callback: (resp) => {
          if (resp.error) { showToast('Google auth failed: ' + resp.error, 'error'); return; }
          gdriveToken = resp.access_token;
          gdriveTokenExpiry = Date.now() + (resp.expires_in * 1000);
          try { sessionStorage.setItem('gdrive_token', JSON.stringify({ token: gdriveToken, expiry: gdriveTokenExpiry })); } catch(e) {}
          updateDriveBannerConnected();
          showToast('✓ Google Drive connected!', 'success');
        }
      });
      client.requestAccessToken();
    };

    window.gdriveSignOut = function() {
      gdriveToken = null; gdriveFolderId = null;
      try { sessionStorage.removeItem('gdrive_token'); } catch(e) {}
      updateDriveBannerDisconnected();
      showToast('Disconnected from Google Drive.', '');
    };

    async function getOrCreateDriveFolder() {
      if (gdriveFolderId) return gdriveFolderId;
      // Search for existing folder
      const q = `name='${GDRIVE_FOLDER_NAME}' and mimeType='application/vnd.google-apps.folder' and trashed=false`;
      const searchResp = await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(q)}&fields=files(id,name)`, {
        headers: { Authorization: 'Bearer ' + gdriveToken }
      });
      const searchData = await searchResp.json();
      if (searchData.files && searchData.files.length > 0) {
        gdriveFolderId = searchData.files[0].id;
        return gdriveFolderId;
      }
      // Create folder
      const createResp = await fetch('https://www.googleapis.com/drive/v3/files', {
        method: 'POST',
        headers: { Authorization: 'Bearer ' + gdriveToken, 'Content-Type': 'application/json' },
        body: JSON.stringify({ name: GDRIVE_FOLDER_NAME, mimeType: 'application/vnd.google-apps.folder' })
      });
      const createData = await createResp.json();
      gdriveFolderId = createData.id;
      // Make folder public so links work
      await fetch(`https://www.googleapis.com/drive/v3/files/${gdriveFolderId}/permissions`, {
        method: 'POST',
        headers: { Authorization: 'Bearer ' + gdriveToken, 'Content-Type': 'application/json' },
        body: JSON.stringify({ role: 'reader', type: 'anyone' })
      });
      return gdriveFolderId;
    }

    async function uploadFileToDrive(file, progressBarId, progressWrapId) {
      if (!gdriveToken || Date.now() > gdriveTokenExpiry) {
        throw new Error('Not connected to Google Drive. Click "Connect Google Drive" first.');
      }
      const folderId = await getOrCreateDriveFolder();
      const progressWrap = progressWrapId ? document.getElementById(progressWrapId) : null;
      const progressBar = progressBarId ? document.getElementById(progressBarId) : null;
      if (progressWrap) progressWrap.style.display = 'block';
      if (progressBar) progressBar.style.width = '10%';

      // Step 1: Create file metadata
      const metadata = { name: file.name, parents: [folderId] };
      const form = new FormData();
      form.append('metadata', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));
      form.append('file', file);

      if (progressBar) progressBar.style.width = '30%';

      const uploadResp = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,webContentLink,webViewLink', {
        method: 'POST',
        headers: { Authorization: 'Bearer ' + gdriveToken },
        body: form
      });
      if (!uploadResp.ok) {
        const err = await uploadResp.json();
        throw new Error(err.error ? err.error.message : 'Upload failed');
      }
      const fileData = await uploadResp.json();
      if (progressBar) progressBar.style.width = '70%';

      // Make file public
      await fetch(`https://www.googleapis.com/drive/v3/files/${fileData.id}/permissions`, {
        method: 'POST',
        headers: { Authorization: 'Bearer ' + gdriveToken, 'Content-Type': 'application/json' },
        body: JSON.stringify({ role: 'reader', type: 'anyone' })
      });
      if (progressBar) progressBar.style.width = '100%';

      // Return embeddable URL for images, or preview link for videos
      const isImage = file.type.startsWith('image/');
      const directUrl = isImage
        ? `https://drive.google.com/thumbnail?id=${fileData.id}&sz=w800`
        : `https://drive.google.com/file/d/${fileData.id}/preview`;

      return { id: fileData.id, url: directUrl, viewUrl: fileData.webViewLink };
    }

    window.switchImgTab = function(mode) {
      document.getElementById('img-url-mode').style.display = mode === 'url' ? '' : 'none';
      document.getElementById('img-drive-mode').style.display = mode === 'drive' ? '' : 'none';
      document.getElementById('img-tab-url').classList.toggle('active', mode === 'url');
      document.getElementById('img-tab-upload').classList.toggle('active', mode === 'drive');
    };

    window.switchVidTab = function(mode) {
      document.getElementById('vid-url-mode').style.display = mode === 'url' ? '' : 'none';
      document.getElementById('vid-drive-mode').style.display = mode === 'drive' ? '' : 'none';
      document.getElementById('vid-tab-url').classList.toggle('active', mode === 'url');
      document.getElementById('vid-tab-upload').classList.toggle('active', mode === 'drive');
    };

    window.triggerDriveUpload = function(type) {
      if (!gdriveToken || Date.now() > gdriveTokenExpiry) {
        showToast('Connect Google Drive first!', 'error');
        gdriveAuth();
      }
    };

    window.handleDriveUpload = async function(input, type) {
      const file = input.files[0]; if (!file) return;
      const isImg = type === 'img';
      const statusEl = document.getElementById(isImg ? 'img-drive-status' : 'vid-drive-status');
      const progressWrapId = isImg ? 'img-drive-progress' : 'vid-drive-progress';
      const progressBarId = isImg ? 'img-drive-bar' : 'vid-drive-bar';
      const hiddenId = isImg ? 'proj-img-uploaded' : 'proj-video-uploaded';
      const previewEl = isImg ? document.getElementById('img-drive-preview') : null;

      statusEl.style.color = 'var(--muted)';
      statusEl.textContent = 'Uploading to Google Drive...';
      try {
        const result = await uploadFileToDrive(file, progressBarId, progressWrapId);
        document.getElementById(hiddenId).value = result.url;
        statusEl.style.color = 'var(--success)';
        statusEl.innerHTML = '&#10003; Saved to Google Drive! <a href="' + result.viewUrl + '" target="_blank" style="color:var(--accent);font-weight:600;">View in Drive &#8599;</a>';
        if (previewEl) { previewEl.style.display = 'block'; previewEl.querySelector('img').src = result.url; }
        setTimeout(() => { document.getElementById(progressWrapId).style.display = 'none'; }, 800);
      } catch(e) {
        statusEl.style.color = 'var(--danger)';
        statusEl.textContent = '✕ ' + e.message;
        document.getElementById(progressWrapId).style.display = 'none';
      }
    };

    window.switchEditImgTab = function(mode) {
      document.getElementById('edit-img-url-mode').style.display = mode === 'url' ? '' : 'none';
      document.getElementById('edit-img-upload-mode').style.display = mode === 'drive' ? '' : 'none';
      document.getElementById('edit-img-tab-url').classList.toggle('active', mode === 'url');
      document.getElementById('edit-img-tab-upload').classList.toggle('active', mode === 'drive');
    };

    window.handleEditImgUpload = async function(input) {
      const file = input.files[0]; if (!file) return;
      const statusEl = document.getElementById('edit-img-status');
      statusEl.style.color = 'var(--muted)';
      statusEl.textContent = 'Uploading to Google Drive...';
      try {
        const result = await uploadFileToDrive(file, 'edit-img-bar', 'edit-img-progress');
        document.getElementById('edit-proj-img-uploaded').value = result.url;
        document.getElementById('edit-proj-img').value = result.url;
        statusEl.style.color = 'var(--success)';
        statusEl.innerHTML = '&#10003; Uploaded! <a href="' + result.viewUrl + '" target="_blank" style="color:var(--accent);">View &#8599;</a>';
        setTimeout(() => { document.getElementById('edit-img-progress').style.display = 'none'; }, 800);
      } catch(e) { statusEl.style.color = 'var(--danger)'; statusEl.textContent = '✕ ' + e.message; document.getElementById('edit-img-progress').style.display = 'none'; }
    };

    window.addProject = async function () {
      const name = document.getElementById('proj-name').value.trim();
      const cat = document.getElementById('proj-cat').value;
      const desc = document.getElementById('proj-desc').value.trim();
      const uploadedImg = (document.getElementById('proj-img-uploaded') || {}).value || '';
      const urlImg = ((document.getElementById('proj-img') || {}).value || '').trim();
      const img = uploadedImg || urlImg;
      const uploadedVideo = (document.getElementById('proj-video-uploaded') || {}).value || '';
      const urlVideo = ((document.getElementById('proj-video') || {}).value || '').trim();
      const video = uploadedVideo || urlVideo;
      const link = ((document.getElementById('proj-link') || {}).value || '').trim();
      if (!name) { showToast('Project name is required.', 'error'); return; }
      if (!desc) { showToast('Description is required.', 'error'); return; }
      const addBtn = document.querySelector('#panel-add-project .submit-btn');
      if (addBtn) { addBtn.textContent = 'Saving...'; addBtn.disabled = true; }
      try {
        const projectData = { name, category: cat, desc, img, video, link, date: new Date().toLocaleDateString(), createdAt: Date.now() };
        await addProjectToFirebase(projectData);
        ['proj-name', 'proj-desc', 'proj-img', 'proj-video', 'proj-link', 'proj-img-uploaded', 'proj-video-uploaded'].forEach(id => { const el = document.getElementById(id); if (el) el.value = ''; });
        const prev = document.getElementById('img-preview-add'); if (prev) prev.style.display = 'none';
        const dPrev = document.getElementById('img-drive-preview'); if (dPrev) dPrev.style.display = 'none';
        const dStatus = document.getElementById('img-drive-status'); if (dStatus) { dStatus.textContent = ''; }
        const vStatus = document.getElementById('vid-drive-status'); if (vStatus) { vStatus.textContent = ''; }
        const fi = document.getElementById('img-file-input'); if (fi) fi.value = '';
        const fv = document.getElementById('vid-file-input'); if (fv) fv.value = '';
        loadDashboardStats();
        showToast('&#10003; Project saved! Visible on all devices now.', 'success');
      } catch (e) {
        showToast('Error: ' + e.message, 'error');
      } finally {
        if (addBtn) { addBtn.textContent = 'Add Project'; addBtn.disabled = false; }
      }
    };

    // ============================================================
    // LIKES SYSTEM (Firebase-stored so all visitors see same count)
    // ============================================================
    function getLikes(projectId) {
      return (window._cache.likes && window._cache.likes[projectId]) || 0;
    }

    function isLiked(projectId) {
      try {
        const liked = JSON.parse(localStorage.getItem('pf_liked') || '{}');
        return !!liked[projectId];
      } catch(e) { return false; }
    }

    function setLikedLocally(projectId, val) {
      try {
        const liked = JSON.parse(localStorage.getItem('pf_liked') || '{}');
        liked[projectId] = val;
        localStorage.setItem('pf_liked', JSON.stringify(liked));
      } catch(e) {}
    }

    window.toggleLike = async function(projectId, btn, isModal) {
      const wasLiked = isLiked(projectId);
      const delta = wasLiked ? -1 : 1;
      setLikedLocally(projectId, !wasLiked);
      try {
        await db.ref('likes/' + projectId).transaction(v => Math.max(0, (v || 0) + delta));
      } catch(e) { /* optimistic update already done */ }
      // Update card button
      const cardBtn = document.getElementById('card-' + projectId) ? document.querySelector('#card-' + projectId + ' .like-btn') : null;
      if (cardBtn) {
        const newLikes = getLikes(projectId) + delta;
        cardBtn.classList.toggle('liked', !wasLiked);
        const svg = cardBtn.querySelector('svg');
        if (svg) svg.setAttribute('fill', !wasLiked ? '#ff6b8a' : 'none');
        const countEl = document.getElementById('like-count-' + projectId);
        if (countEl) countEl.textContent = Math.max(0, newLikes);
      }
      // Update modal button if open
      const modalBtn = document.getElementById('modal-like-btn-' + projectId);
      if (modalBtn) {
        modalBtn.classList.toggle('liked', !wasLiked);
        const svg = modalBtn.querySelector('svg');
        if (svg) svg.setAttribute('fill', !wasLiked ? '#ff6b8a' : 'none');
        const countEl = document.getElementById('modal-like-count-' + projectId);
        if (countEl) {
          const newVal = Math.max(0, getLikes(projectId) + delta);
          countEl.textContent = newVal;
          countEl.nextSibling && (modalBtn.lastChild.textContent = ' Like' + (newVal !== 1 ? 's' : ''));
        }
      }
    };

    // ============================================================
    // EXPAND / COLLAPSE CARD DETAILS
    // ============================================================
    window.toggleCardDetails = function(projectId) {
      const panel = document.getElementById('card-details-' + projectId);
      const btn = document.getElementById('toggle-btn-' + projectId);
      if (!panel) return;
      const isOpen = panel.classList.contains('open');
      panel.classList.toggle('open', !isOpen);
      if (btn) {
        btn.classList.toggle('open', !isOpen);
        btn.innerHTML = `<span class="toggle-arrow" style="transform:${!isOpen ? 'rotate(180deg)' : 'rotate(0)'};display:inline-block;transition:transform 0.3s;">${isOpen ? '&#9660;' : '&#9650;'}</span>&nbsp; ${!isOpen ? 'Hide Details' : 'View Details &amp; Comments'}`;
      }
    };

    // ============================================================
    // PUBLIC PROJECT RENDERING
    // ============================================================
    let currentFilter = 'all';
    const DEF_IMGS = {
      software: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=700&q=70',
      web: 'https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?w=700&q=70',
      webapp: 'https://images.unsplash.com/photo-1551650975-87deedd944c3?w=700&q=70'
    };
    const CAT_LABELS = { software: 'Software', web: 'Web Dev', webapp: 'Web App' };

    function renderProjects() {
      const all = getProjects();
      const projects = currentFilter === 'all' ? all : all.filter(p => p.category === currentFilter);
      const grid = document.getElementById('projects-grid');
      if (!all.length) { grid.innerHTML = '<div class="no-projects-msg">No projects have been added yet. Check back soon.</div>'; animateNum('hero-project-count', 0); return; }
      if (!projects.length) { grid.innerHTML = '<div class="no-projects-msg">No projects in this category yet.</div>'; return; }
      const comments = getComments();
      grid.innerHTML = projects.map(p => {
        const pc = comments.filter(c => c.projectId === p.id);
        const avg = pc.length ? (pc.reduce((a, c) => a + (c.rating || 0), 0) / pc.length) : 0;
        const filled = Math.round(avg);
        const stars = '\u2605'.repeat(filled) + '\u2606'.repeat(5 - filled);
        const thumb = fixDriveImgUrl(p.img) || DEF_IMGS[p.category] || DEF_IMGS.web;
        const likes = getLikes(p.id);
        const liked = isLiked(p.id);
        const heartFill = liked ? '#ff6b8a' : 'none';
        const recentReviews = pc.slice(-2).map(c => `<div style="background:var(--surface);border:1px solid var(--border);padding:0.75rem;margin-bottom:0.5rem;font-size:0.82rem;"><div style="display:flex;justify-content:space-between;margin-bottom:0.25rem;"><strong style="color:var(--white)">${c.author || 'Anonymous'}</strong><span style="color:var(--gold)">${'\u2605'.repeat(c.rating || 0)}</span></div><p style="color:var(--muted);line-height:1.5;">${c.text}</p></div>`).join('');
        return `<div class="project-card" id="card-${p.id}">
      <div class="project-thumb">
        <img src="${thumb}" alt="${p.name}" loading="lazy" onerror="this.src='${DEF_IMGS[p.category] || DEF_IMGS.web}'">
        <div class="project-thumb-overlay">
          ${p.link ? `<a href="${p.link}" target="_blank" class="thumb-btn">Live Preview</a>` : ''}
          <button class="thumb-btn outline" onclick="openProjectModal('${p.id}')">Full Details</button>
        </div>
        <div class="project-category-badge">${CAT_LABELS[p.category] || p.category}</div>
      </div>
      <div class="project-body">
        <div class="project-title">${p.name}</div>
        <p class="project-desc">${p.desc.substring(0, 110)}${p.desc.length > 110 ? '...' : ''}</p>
        <div class="project-rating"><span class="stars">${stars}</span><span class="rating-count">${avg.toFixed(1)} (${pc.length} review${pc.length !== 1 ? 's' : ''})</span></div>
        <div class="project-footer">
          <button class="like-btn${liked ? ' liked' : ''}" onclick="toggleLike('${p.id}', this)" title="Like this project">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="${heartFill}" stroke="#ff6b8a" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
            <span id="like-count-${p.id}">${likes}</span>
          </button>
          <button class="view-detail-btn" onclick="openProjectModal('${p.id}')">Leave Review</button>
        </div>
      </div>
      <button class="expand-toggle-btn" id="toggle-btn-${p.id}" onclick="toggleCardDetails('${p.id}')">
        <span class="toggle-arrow">&#9660;</span>&nbsp; View Details &amp; Comments
      </button>
      <div class="card-expand-details" id="card-details-${p.id}">
        <div class="card-expand-inner">
          <p style="font-size:0.85rem;color:var(--muted);line-height:1.7;margin-bottom:1rem;">${p.desc}</p>
          ${p.link ? `<a href="${p.link}" target="_blank" style="display:inline-flex;align-items:center;gap:0.4rem;font-size:0.75rem;color:var(--accent);font-weight:600;letter-spacing:1px;text-transform:uppercase;margin-bottom:1rem;">Live Preview &#8599;</a><br>` : ''}
          <div style="font-size:0.78rem;color:var(--muted);margin-bottom:1rem;">
            <strong style="color:var(--text)">Category:</strong> ${CAT_LABELS[p.category] || p.category} &nbsp;|&nbsp;
            <strong style="color:var(--text)">Rating:</strong> <span style="color:var(--gold)">${avg.toFixed(1)}/5</span> &nbsp;|&nbsp;
            <strong style="color:var(--text)">Reviews:</strong> ${pc.length}
          </div>
          ${pc.length ? `<div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:0.5rem;">Recent Reviews</div>${recentReviews}` : `<p style="font-size:0.82rem;color:var(--muted);">No reviews yet. <button onclick="openProjectModal('${p.id}')" style="background:none;border:none;color:var(--accent);cursor:pointer;font-family:inherit;font-size:inherit;font-weight:600;">Be first to review &#8594;</button></p>`}
          <button onclick="toggleCardDetails('${p.id}')" style="margin-top:0.75rem;background:none;border:1px solid var(--border);color:var(--muted);font-family:'DM Sans',sans-serif;font-size:0.72rem;font-weight:600;letter-spacing:1px;text-transform:uppercase;padding:0.4rem 0.9rem;cursor:pointer;">&#8613; Hide Details</button>
        </div>
      </div>
    </div>`;
      }).join('');
      animateNum('hero-project-count', all.length);
    }

    window.filterProjects = function (cat, el) {
      currentFilter = cat;
      document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
      if (el) el.classList.add('active');
      renderProjects();
    };

    // ============================================================
    // PROJECT MODAL
    // ============================================================
    window.openProjectModal = function (id) {
      const p = getProjects().find(x => x.id == id);
      if (!p) return;
      document.getElementById('modal-title').textContent = p.name;
      const comments = getComments().filter(c => c.projectId == id);
      const avg = comments.length ? (comments.reduce((a, c) => a + (c.rating || 0), 0) / comments.length).toFixed(1) : '0.0';
      const thumb = fixDriveImgUrl(p.img) || DEF_IMGS[p.category] || DEF_IMGS.web;
      const likes = getLikes(id);
      const liked = isLiked(id);
      document.getElementById('modal-body').innerHTML = `
    ${p.video
          ? `<video class="modal-video" controls preload="metadata"><source src="${p.video}" type="video/mp4">Your browser does not support video.</video>`
          : `<img class="modal-img" src="${thumb}" alt="${p.name}" onerror="this.src='${DEF_IMGS[p.category] || DEF_IMGS.web}'">`
        }
    <div class="modal-like-row">
      ${p.link ? `<a href="${p.link}" target="_blank" class="modal-preview-link">Open Live Preview <svg width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg></a>` : ''}
      <button class="like-btn${liked ? ' liked' : ''}" id="modal-like-btn-${id}" onclick="toggleLike('${id}', this, true)" title="Like this project">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="${liked ? '#ff6b8a' : 'none'}" stroke="#ff6b8a" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        <span id="modal-like-count-${id}">${likes}</span> Like${likes !== 1 ? 's' : ''}
      </button>
    </div>
    <p style="color:var(--text);line-height:1.8;margin-bottom:1rem;">${p.desc}</p>
    <div style="display:flex;gap:1.5rem;flex-wrap:wrap;margin-bottom:0.5rem;">
      <span style="font-size:0.72rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;">Category: <strong style="color:var(--accent)">${CAT_LABELS[p.category] || p.category}</strong></span>
      <span style="font-size:0.72rem;color:var(--muted);">Avg Rating: <strong style="color:var(--gold)">${avg} / 5.0</strong></span>
    </div>
    <div class="comments-section">
      <div class="comments-title">Client Reviews (${comments.length})</div>
      <div class="comment-list" id="comment-list-${id}">${buildCommentList(comments)}</div>
      <div style="margin-top:1.5rem;">
        <div class="comments-title">Leave a Review</div>
        <input type="text" class="comment-name-input" id="rev-name" placeholder="Your name (optional)">
        <div class="star-rating-input" id="star-wrap-${id}" style="flex-direction:row;justify-content:flex-start;gap:4px;margin-bottom:0.75rem;">
          ${[1, 2, 3, 4, 5].map(n => `<label data-val="${n}" onclick="setRating(${n},'${id}')" style="cursor:pointer;font-size:1.6rem;color:var(--border);transition:color 0.15s">&#9733;</label>`).join('')}
          <span id="rating-display-${id}" style="font-size:0.72rem;color:var(--muted);align-self:center;margin-left:0.5rem">Select rating</span>
        </div>
        <textarea class="comment-input" id="rev-text-${id}" placeholder="Share your experience with this project..."></textarea>
        <button class="submit-comment-btn" onclick="submitComment('${id}')">Submit Review</button>
      </div>
    </div>`;
      window._ratings = window._ratings || {};
      window._ratings[id] = 0;
      document.getElementById('project-modal').classList.add('open');
    };

    window.setRating = function (val, pid) {
      window._ratings = window._ratings || {};
      window._ratings[pid] = val;
      const wrap = document.getElementById('star-wrap-' + pid);
      if (!wrap) return;
      wrap.querySelectorAll('label').forEach(l => {
        l.style.color = parseInt(l.dataset.val) <= val ? 'var(--gold)' : 'var(--border)';
      });
      const disp = document.getElementById('rating-display-' + pid);
      if (disp) disp.textContent = val + ' / 5';
    };

    function buildCommentList(comments) {
      if (!comments.length) return '<p style="color:var(--muted);font-size:0.85rem;padding:0.5rem 0;">No reviews yet. Be the first to leave one!</p>';
      return comments.map(c => `
    <div class="comment-item">
      <div class="comment-meta">
        <div><span class="comment-author">${c.author || 'Anonymous'}</span> <span style="color:var(--gold);font-size:0.82rem;">${'★'.repeat(c.rating || 0)}</span></div>
        <span class="comment-date">${c.date}</span>
      </div>
      <p class="comment-text">${c.text}</p>
    </div>`).join('');
    }

    window.submitComment = async function (projectId) {
      const author = (document.getElementById('rev-name').value || '').trim() || 'Anonymous';
      const text = (document.getElementById('rev-text-' + projectId).value || '').trim();
      const rating = (window._ratings || {})[projectId] || 0;
      if (!text) { showToast('Please write a comment before submitting.', 'error'); return; }
      if (!rating) { showToast('Please select a star rating.', 'error'); return; }
      const projects = getProjects();
      const p = projects.find(x => x.id == projectId);
      const commentData = { projectId, projectName: p ? p.name : '', author, text, rating, date: new Date().toLocaleDateString() };
      const btn = document.querySelector('#project-modal .submit-comment-btn');
      if (btn) { btn.textContent = 'Submitting...'; btn.disabled = true; }
      try {
        await addCommentToFirebase(commentData);
        document.getElementById('rev-text-' + projectId).value = '';
        if (document.getElementById('rev-name')) document.getElementById('rev-name').value = '';
        if (window._ratings) window._ratings[projectId] = 0;
        const wrap = document.getElementById('star-wrap-' + projectId);
        if (wrap) wrap.querySelectorAll('label').forEach(l => l.style.color = 'var(--border)');
        const disp = document.getElementById('rating-display-' + projectId);
        if (disp) disp.textContent = 'Select rating';
        const updated = getComments().filter(c => c.projectId == projectId);
        const cl = document.getElementById('comment-list-' + projectId);
        if (cl) cl.innerHTML = buildCommentList(updated);
        renderProjects();
        showToast('Review submitted. Thank you!', 'success');
      } catch (e) {
        showToast('Error submitting review: ' + e.message, 'error');
      } finally {
        if (btn) { btn.textContent = 'Submit Review'; btn.disabled = false; }
      }
    };

    window.closeModal = function () {
      document.getElementById('project-modal').classList.remove('open');
    };
    document.getElementById('project-modal').addEventListener('click', e => { if (e.target === document.getElementById('project-modal')) closeModal(); });

    // ============================================================
    // NAV / MOBILE
    // ============================================================
    window.toggleMobileNav = function () { document.getElementById('mobile-nav').classList.toggle('open'); };
    window.closeMobileNav = function () { document.getElementById('mobile-nav').classList.remove('open'); };

    // ============================================================
    // ANIMATIONS
    // ============================================================
    function animateHeroStats() {
      const v = getVisitors();
      const p = getProjects();
      animateNum('hero-visitor-count', v.total || 0);
      animateNum('hero-project-count', p.length);
    }

    function animateNum(id, target) {
      const el = document.getElementById(id);
      if (!el) return;
      let cur = 0; const inc = Math.max(1, Math.ceil(target / 40));
      const t = setInterval(() => { cur = Math.min(cur + inc, target); el.textContent = cur; if (cur >= target) clearInterval(t); }, 30);
    }

    function animateSkillBars() {
      const obs = new IntersectionObserver(entries => {
        entries.forEach(e => { if (e.isIntersecting) { e.target.querySelectorAll('.skill-fill').forEach(f => f.style.width = f.dataset.width + '%'); obs.unobserve(e.target); } });
      }, { threshold: 0.3 });
      const sw = document.querySelector('.skills-wrap');
      if (sw) obs.observe(sw);
    }

    // ============================================================
    // TOAST
    // ============================================================
    window.showToast = function (msg, type = '') {
      const t = document.getElementById('toast');
      t.textContent = msg; t.className = 'toast ' + type + ' show';
      setTimeout(() => t.classList.remove('show'), 3500);
    };

    // ============================================================
    // INIT
    // ============================================================
    function initPublicSite() {
      renderProjects();
      animateHeroStats();
      animateSkillBars();
      // Hide Firebase notice if config looks real
      if (!firebaseConfig.apiKey.includes('YOUR_')) {
        const notice = document.getElementById('firebase-setup-notice');
        if (notice) notice.style.display = 'none';
      }
    }

  </script>

</body>

</html>
